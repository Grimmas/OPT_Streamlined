// B9 Tank Switch for OPT Spaceplane
// Author: JadeOfMaar

// Removes dependency on Firespitter.
// OPT Night Mode not supported.

// =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  
B9_TANK_TYPE:NEEDS[B9PartSwitch,!ModularFuelTanks,!RealFuels]
{
	name = OPTLF
	tankMass = 0.0003
	tankCost = 0.25
	RESOURCE
	{
		name = LiquidFuel
		unitsPerVolume = 1
	}
}
B9_TANK_TYPE:NEEDS[B9PartSwitch,!ModularFuelTanks,!RealFuels]
{
	name = OPTLFO
	tankMass = 0.0003
	tankCost = 0.25
	RESOURCE
	{
		name = LiquidFuel
		unitsPerVolume = 0.45
	}
	RESOURCE
	{
		name = Oxidizer
		unitsPerVolume = 0.55
	}
}
B9_TANK_TYPE:NEEDS[B9PartSwitch,!ModularFuelTanks,!RealFuels]
{
	name = OPTOX
	tankMass = 0.0003
	tankCost = 0.25
	RESOURCE
	{
		name = Oxidizer
		unitsPerVolume = 1
	}
}
B9_TANK_TYPE:NEEDS[B9PartSwitch,!ModularFuelTanks,!RealFuels]
{
	name = OPTMONO
	tankMass = 0.0003
	tankCost = 0.75
	RESOURCE
	{
		name = MonoPropellant
		unitsPerVolume = 1.5
	}
}
B9_TANK_TYPE:NEEDS[B9PartSwitch]
{
	name = OPTAB
	tankMass = 0.0003
	tankCost = 0.5
	RESOURCE
	{
		name = Ablator
		unitsPerVolume = 1
	}
}
B9_TANK_TYPE:NEEDS[B9PartSwitch,Kerbalism|NearFuturePropulsion,!ModularFuelTanks,!RealFuels]
{
	name = OPTXE
	tankMass = 0.0003
	tankCost = 0.25
	RESOURCE
	{
		name = XenonGas
		unitsPerVolume = 100
	}
}

// =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  
// Cockpits
@PART[mk2_cockpit|mk2_cockpitv2]
{
	// capacityFactor = 0.03
    MODULE:NEEDS[B9PartSwitch,!Pathfinder,!ModularFuelTanks,!RealFuels]
	{
		name = ModuleB9PartSwitch
		moduleID = OPTcmd
		switcherDescription = OPT Tank
		switcherDescriptionPlural = Tank Selections
		switchInFlight = True
		baseVolume = 54
	}
}

@PART[mk3Cockpit_Airliner]
{
	// capacityFactor = 0.16
	MODULE:NEEDS[B9PartSwitch,!Pathfinder,!ModularFuelTanks,!RealFuels]
	{
		name = ModuleB9PartSwitch
		moduleID = OPTcmd
		switcherDescription = OPT Tank
		switcherDescriptionPlural = Tank Selections
		switchInFlight = True
		baseVolume = 288
	}
}

@PART[a_cockpit]
{
	// capacityFactor = 0.06
	MODULE:NEEDS[B9PartSwitch,!Pathfinder,!ModularFuelTanks,!RealFuels]
	{
		name = ModuleB9PartSwitch
		moduleID = OPTcmd
		switcherDescription = OPT Tank
		switcherDescriptionPlural = Tank Selections
		switchInFlight = True
		baseVolume = 108
	}
}

@PART[a_8m_cockpit]
{
	// capacityFactor = 0.667
	MODULE:NEEDS[B9PartSwitch,!Pathfinder,!ModularFuelTanks,!RealFuels]
	{
		name = ModuleB9PartSwitch
		moduleID = OPTcmd
		switcherDescription = OPT Tank
		switcherDescriptionPlural = Tank Selections
		switchInFlight = True
		baseVolume = 1200
	}
}

@PART[b_cockpit]
{
	// capacityFactor = 0.3
	MODULE:NEEDS[B9PartSwitch,!Pathfinder,!ModularFuelTanks,!RealFuels]
	{
		name = ModuleB9PartSwitch
		moduleID = OPTcmd
		switcherDescription = OPT Tank
		switcherDescriptionPlural = Tank Selections
		switchInFlight = True
		baseVolume = 540
	}
}

@PART[b_cockpit_qs]
{
	// capacityFactor = 0.18
	MODULE:NEEDS[B9PartSwitch,!Pathfinder,!ModularFuelTanks,!RealFuels]
	{
		name = ModuleB9PartSwitch
		moduleID = OPTcmd
		switcherDescription = OPT Tank
		switcherDescriptionPlural = Tank Selections
		switchInFlight = True
		baseVolume = 324
	}
}

@PART[i_4m_cockpit_isp|i_4m_cockpit_ispb|phoenix_cockpit|ils_cockpitv2|ils_cockpit_mki|mk23_cockpit]
{
	// capacityFactor = 0.06
	MODULE:NEEDS[B9PartSwitch,!Pathfinder,!ModularFuelTanks,!RealFuels]
	{
		name = ModuleB9PartSwitch
		moduleID = OPTcmd
		switcherDescription = OPT Tank
		switcherDescriptionPlural = Tank Selections
		switchInFlight = True
		baseVolume = 108
	}
}

@PART[j_cockpit|j_cockpitv2|j_cockpit_qs_no_intake]
{
	// capacityFactor = 0.22
	MODULE:NEEDS[B9PartSwitch,!Pathfinder,!ModularFuelTanks,!RealFuels]
	{
		name = ModuleB9PartSwitch
		moduleID = OPTcmd
		switcherDescription = OPT Tank
		switcherDescriptionPlural = Tank Selections
		switchInFlight = True
		baseVolume = 396
	}
}

@PART[j_cockpit_qs|j_6m_cockpit]
{
	// capacityFactor = 0.33
	MODULE:NEEDS[B9PartSwitch,!Pathfinder,!ModularFuelTanks,!RealFuels]
	{
		name = ModuleB9PartSwitch
		moduleID = OPTcmd
		switcherDescription = OPT Tank
		switcherDescriptionPlural = Tank Selections
		switchInFlight = True
		baseVolume = 594
	}
}

@PART[k_10m_cockpit|k_10m_cockpit_legacy|k_10m_cockpit_custom]
{
	// capacityFactor = 0.6
	MODULE:NEEDS[B9PartSwitch,!Pathfinder,!ModularFuelTanks,!RealFuels]
	{
		name = ModuleB9PartSwitch
		moduleID = OPTcmd
		switcherDescription = OPT Tank
		switcherDescriptionPlural = Tank Selections
		switchInFlight = True
		baseVolume = 1080
	}
}

@PART[l_8m_cockpit]
{
	// capacityFactor = 0.9
	MODULE:NEEDS[B9PartSwitch,!Pathfinder,!ModularFuelTanks,!RealFuels]
	{
		name = ModuleB9PartSwitch
		moduleID = OPTcmd
		switcherDescription = OPT Tank
		switcherDescriptionPlural = Tank Selections
		switchInFlight = True
		baseVolume = 1620
	}
}

// =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  
// Labs
@PART[j_4m_lab|b_4m_lab]
{
	// capacityFactor = 0.9
	// MODULE:NEEDS[B9PartSwitch,!Pathfinder,!ModularFuelTanks,!RealFuels]
	// {
		// name = ModuleB9PartSwitch
		// moduleID = OPTlab
		// switcherDescription = OPT Tank
		// switcherDescriptionPlural = Tank Selections
		// switchInFlight = True
		// baseVolume = 1620
	// }
}

// =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  
// Bays and Tails
@PART[j_4m_cargo|j_4m_service|i_4m_tail|b_engineMount_4|j_engineMount_4]
{
	// capacityFactor = 0.9
	MODULE:NEEDS[B9PartSwitch,!Pathfinder,!ModularFuelTanks,!RealFuels]
	{
		name = ModuleB9PartSwitch
		moduleID = OPTcargo
		switcherDescription = OPT Tank
		switcherDescriptionPlural = Tank Selections
		switchInFlight = True
		baseVolume = 1620
	}
}
@PART[k_3m_fuselage|kh_3m_fuselage|k_3m_cargo|kh_3m_cargo]
{
	// capacityFactor = 1.3
	MODULE:NEEDS[B9PartSwitch,!Pathfinder,!ModularFuelTanks,!RealFuels]
	{
		name = ModuleB9PartSwitch
		moduleID = OPTcargo
		switcherDescription = OPT Tank
		switcherDescriptionPlural = Tank Selections
		switchInFlight = True
		baseVolume = 2340
	}
}
@PART[kh_7m_cargoTail_variant]
{
	// capacityFactor = 0.6
	MODULE:NEEDS[B9PartSwitch,!Pathfinder,!ModularFuelTanks,!RealFuels]
	{
		name = ModuleB9PartSwitch
		moduleID = OPTtail
		switcherDescription = OPT Tank
		switcherDescriptionPlural = Tank Selections
		switchInFlight = True
		baseVolume = 1080
	}
}
@PART[kh_6m_cargo|kh_6m_fuselage|k_6m_cargo|k_6m_fuselage|l_6m_cargo|l_6m_fuselage]
{
	// capacityFactor = 2.6
	MODULE:NEEDS[B9PartSwitch,!Pathfinder,!ModularFuelTanks,!RealFuels]
	{
		name = ModuleB9PartSwitch
		moduleID = OPTcargo
		switcherDescription = OPT Tank
		switcherDescriptionPlural = Tank Selections
		switchInFlight = True
		baseVolume = 4680
	}
}
@PART[a_6m_cargoTail|b_4m_tail|c_6m_cargoTail|j_5m_tail|k_7m_cargoTail_variant]
{
	// capacityFactor = 1.0
	MODULE:NEEDS[B9PartSwitch,!Pathfinder,!ModularFuelTanks,!RealFuels]
	{
		name = ModuleB9PartSwitch
		moduleID = OPTtail
		switcherDescription = OPT Tank
		switcherDescriptionPlural = Tank Selections
		switchInFlight = True
		baseVolume = 1800
	}
}
@PART[j_deploymentBay]
{
	// capacityFactor = 0.4
	MODULE:NEEDS[B9PartSwitch,!Pathfinder,!ModularFuelTanks,!RealFuels]
	{
		name = ModuleB9PartSwitch
		moduleID = OPTcargo
		switcherDescription = OPT Tank
		switcherDescriptionPlural = Tank Selections
		switchInFlight = True
		baseVolume = 720
	}
}

// =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  
// Cabins
@PART[h_3m_crew_mm|h_3m_crew_fm]
{
	// capacityFactor = 0.1
	MODULE:NEEDS[B9PartSwitch,!Pathfinder,!ModularFuelTanks,!RealFuels]
	{
		name = ModuleB9PartSwitch
		moduleID = OPTcabin
		switcherDescription = OPT Tank
		switcherDescriptionPlural = Tank Selections
		switchInFlight = True
		baseVolume = 180
	}
}

@PART[j_4m_crew]
{
	// capacityFactor = 0.9
	MODULE:NEEDS[B9PartSwitch,!Pathfinder,!ModularFuelTanks,!RealFuels]
	{
		name = ModuleB9PartSwitch
		moduleID = OPTcabin
		switcherDescription = OPT Tank
		switcherDescriptionPlural = Tank Selections
		switchInFlight = True
		baseVolume = 1620
	}
}

@PART[l_6m_crew]
{
	// capacityFactor = 2.6
	MODULE:NEEDS[B9PartSwitch,!Pathfinder,!ModularFuelTanks,!RealFuels]
	{
		name = ModuleB9PartSwitch
		moduleID = OPTcabin
		switcherDescription = OPT Tank
		switcherDescriptionPlural = Tank Selections
		switchInFlight = True
		baseVolume = 4680
	}
}

// =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  
// Tanks
@PART[ab_3m_adaptor]
{
	// capacityFactor = 0.8
	MODULE:NEEDS[B9PartSwitch,!Pathfinder,!ModularFuelTanks,!RealFuels]
	{
		name = ModuleB9PartSwitch
		moduleID = OPTbody
		switcherDescription = OPT Tank
		switcherDescriptionPlural = Tank Selections
		switchInFlight = True
		baseVolume = 1440
	}
}

@PART[h_2m_em_mm|h_2m_em_fm|h_2m_nose_mm|h_2m_nose_fm]
{
	// capacityFactor = 0.16
	MODULE:NEEDS[B9PartSwitch,!Pathfinder,!ModularFuelTanks,!RealFuels]
	{
		name = ModuleB9PartSwitch
		moduleID = OPTbody
		switcherDescription = OPT Tank
		switcherDescriptionPlural = Tank Selections
		switchInFlight = True
		baseVolume = 288
	}
}

@PART[h_3m_fuel_mm|h_3m_fuel_fm]
{
	// capacityFactor = 0.6
	MODULE:NEEDS[B9PartSwitch,!Pathfinder,!ModularFuelTanks,!RealFuels]
	{
		name = ModuleB9PartSwitch
		moduleID = OPTbody
		switcherDescription = OPT Tank
		switcherDescriptionPlural = Tank Selections
		switchInFlight = True
		baseVolume = 1080
	}
}

@PART[h_4m_nose_mm|h_4m_nose_fm]
{
	// capacityFactor = 0.48
	MODULE:NEEDS[B9PartSwitch,!Pathfinder,!ModularFuelTanks,!RealFuels]
	{
		name = ModuleB9PartSwitch
		moduleID = OPTbody
		switcherDescription = OPT Tank
		switcherDescriptionPlural = Tank Selections
		switchInFlight = True
		baseVolume = 864
	}
}
@PART[mk2_nose_opt]
{
	// capacityFactor = 0.2
	MODULE:NEEDS[B9PartSwitch,!Pathfinder,!ModularFuelTanks,!RealFuels]
	{
		name = ModuleB9PartSwitch
		moduleID = OPTbody
		switcherDescription = OPT Tank
		switcherDescriptionPlural = Tank Selections
		switchInFlight = True
		baseVolume = 360
	}
}

@PART[mk2b_adaptor|mk2j_adaptor]
{
	// capacityFactor = 0.6
	MODULE:NEEDS[B9PartSwitch,!Pathfinder,!ModularFuelTanks,!RealFuels]
	{
		name = ModuleB9PartSwitch
		moduleID = OPTbody
		switcherDescription = OPT Tank
		switcherDescriptionPlural = Tank Selections
		switchInFlight = True
		baseVolume = 1080
	}
}
@PART[b_2m_bicoupler|j_2m_bicoupler]
{
	// capacityFactor = 1.7
	MODULE:NEEDS[B9PartSwitch,!Pathfinder,!ModularFuelTanks,!RealFuels]
	{
		name = ModuleB9PartSwitch
		moduleID = OPTbody
		switcherDescription = OPT Tank
		switcherDescriptionPlural = Tank Selections
		switchInFlight = True
		baseVolume = 3060
	}
}

@PART[b2_adaptor|b2_4m_adaptor_variant|ij_adaptor|ij_4m_adaptor_variant]
{
	// capacityFactor = 2
	MODULE:NEEDS[B9PartSwitch,!Pathfinder,!ModularFuelTanks,!RealFuels]
	{
		name = ModuleB9PartSwitch
		moduleID = OPTbody
		switcherDescription = OPT Tank
		switcherDescriptionPlural = Tank Selections
		switchInFlight = True
		baseVolume = 3600
	}
}

@PART[j_2m_tanks]
{
	// capacityFactor = 1.3
	MODULE:NEEDS[B9PartSwitch,!Pathfinder,!ModularFuelTanks,!RealFuels]
	{
		name = ModuleB9PartSwitch
		moduleID = OPTbody
		switcherDescription = OPT Tank
		switcherDescriptionPlural = Tank Selections
		switchInFlight = True
		baseVolume = 2340
	}
}
@PART[a_6m_cargo|a_6m_fuselage|b_4m_tanks|c_6m_cargo|c_6m_tanks|j_4m_tanks]
{
	// capacityFactor = 2.6
	MODULE:NEEDS[B9PartSwitch,!Pathfinder,!ModularFuelTanks,!RealFuels]
	{
		name = ModuleB9PartSwitch
		moduleID = OPTbody
		switcherDescription = OPT Tank
		switcherDescriptionPlural = Tank Selections
		switchInFlight = True
		baseVolume = 4680
	}
}
@PART[jl_3m_adaptor]
{
	// capacityFactor = 0.89
	MODULE:NEEDS[B9PartSwitch,!Pathfinder,!ModularFuelTanks,!RealFuels]
	{
		name = ModuleB9PartSwitch
		moduleID = OPTbody
		switcherDescription = OPT Tank
		switcherDescriptionPlural = Tank Selections
		switchInFlight = True
		baseVolume = 1600
	}
}
@PART[a_cockpit_adaptor]
{
	// capacityFactor = 1.5
	MODULE:NEEDS[B9PartSwitch,!Pathfinder,!ModularFuelTanks,!RealFuels]
	{
		name = ModuleB9PartSwitch
		moduleID = OPTbody
		switcherDescription = OPT Tank
		switcherDescriptionPlural = Tank Selections
		switchInFlight = True
		baseVolume = 2700
	}
}

@PART[j_docking_port]
{
	// capacityFactor = 0.32
	MODULE:NEEDS[B9PartSwitch,!Pathfinder,!ModularFuelTanks,!RealFuels]
	{
		name = ModuleB9PartSwitch
		moduleID = OPTcmd
		switcherDescription = OPT Tank
		switcherDescriptionPlural = Tank Selections
		switchInFlight = True
		baseVolume = 576
	}
}
@PART[j_large_docking_port|b_docking_port]
{
	// capacityFactor = 0.44
	MODULE:NEEDS[B9PartSwitch,!Pathfinder,!ModularFuelTanks,!RealFuels]
	{
		name = ModuleB9PartSwitch
		moduleID = OPTcmd
		switcherDescription = OPT Tank
		switcherDescriptionPlural = Tank Selections
		switchInFlight = True
		baseVolume = 792
	}
}
@PART[j_5m_nose]
{
	// capacityFactor = 1.2
	MODULE:NEEDS[B9PartSwitch,!Pathfinder,!ModularFuelTanks,!RealFuels]
	{
		name = ModuleB9PartSwitch
		moduleID = OPTbody
		switcherDescription = OPT Tank
		switcherDescriptionPlural = Tank Selections
		switchInFlight = True
		baseVolume = 2160
	}
}
@PART[jk_3m_adaptor|k_3m_fuelTank]
{
	// capacityFactor = 2.6
	MODULE:NEEDS[B9PartSwitch,!Pathfinder,!ModularFuelTanks,!RealFuels]
	{
		name = ModuleB9PartSwitch
		moduleID = OPTbody
		switcherDescription = OPT Tank
		switcherDescriptionPlural = Tank Selections
		switchInFlight = True
		baseVolume = 4680 // 2160
	}
}
@PART[k_2m_bicoupler|l_3m_bicoupler]
{
	// capacityFactor = 2.78
	MODULE:NEEDS[B9PartSwitch,!Pathfinder,!ModularFuelTanks,!RealFuels]
	{
		name = ModuleB9PartSwitch
		moduleID = OPTtail
		switcherDescription = OPT Tank
		switcherDescriptionPlural = Tank Selections
		switchInFlight = True
		baseVolume = 5000
	}
}
@PART[k_3m_tricoupler]
{
	// capacityFactor = 0.667
	MODULE:NEEDS[B9PartSwitch,!Pathfinder,!ModularFuelTanks,!RealFuels]
	{
		name = ModuleB9PartSwitch
		moduleID = OPTtail
		switcherDescription = OPT Tank
		switcherDescriptionPlural = Tank Selections
		switchInFlight = True
		baseVolume = 1200
	}
}
@PART[a_2m_bicoupler|c_2m_bicoupler]
{
	// capacityFactor = 2.22
	MODULE:NEEDS[B9PartSwitch,!Pathfinder,!ModularFuelTanks,!RealFuels]
	{
		name = ModuleB9PartSwitch
		moduleID = OPTtail
		switcherDescription = OPT Tank
		switcherDescriptionPlural = Tank Selections
		switchInFlight = True
		baseVolume = 4000
	}
}
@PART[ab_7m_adaptor|jk_7m_adaptor|jl_7m_adaptor]
{
	// capacityFactor = 3.9
	MODULE:NEEDS[B9PartSwitch,!Pathfinder,!ModularFuelTanks,!RealFuels]
	{
		name = ModuleB9PartSwitch
		moduleID = OPTbody
		switcherDescription = OPT Tank
		switcherDescriptionPlural = Tank Selections
		switchInFlight = True
		baseVolume = 7020 // 4320
	}
}
@PART[a_6m_tanks|k_6m_fuelTank]
{
	// capacityFactor = 5.2
	MODULE:NEEDS[B9PartSwitch,!Pathfinder,!ModularFuelTanks,!RealFuels]
	{
		name = ModuleB9PartSwitch
		moduleID = OPTbody
		switcherDescription = OPT Tank
		switcherDescriptionPlural = Tank Selections
		switchInFlight = True
		baseVolume = 9360 // 4680
	}
}
// =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  
// Wings
@PART[opt_wing_a]
{
	// capacityFactor = 0.32
	MODULE:NEEDS[B9PartSwitch,!Pathfinder,!ModularFuelTanks,!RealFuels]
	{
		name = ModuleB9PartSwitch
		moduleID = OPTwing
		switcherDescription = OPT Tank
		switcherDescriptionPlural = Tank Selections
		switchInFlight = True
		baseVolume = 576
	}
}
@PART[opt_pylon_a]
{
	// capacityFactor = 1
	MODULE:NEEDS[B9PartSwitch,!Pathfinder,!ModularFuelTanks,!RealFuels]
	{
		name = ModuleB9PartSwitch
		moduleID = OPTwing
		switcherDescription = OPT Tank
		switcherDescriptionPlural = Tank Selections
		switchInFlight = True
		baseVolume = 1800
	}
}
@PART[opt_wing_b|opt_pylon_b]
{
	// capacityFactor = 0.4
	MODULE:NEEDS[B9PartSwitch,!Pathfinder,!ModularFuelTanks,!RealFuels]
	{
		name = ModuleB9PartSwitch
		moduleID = OPTwing
		switcherDescription = OPT Tank
		switcherDescriptionPlural = Tank Selections
		switchInFlight = True
		baseVolume = 720
	}
}
@PART[opt_wing_c]
{
	// capacityFactor = 0.6
	MODULE:NEEDS[B9PartSwitch,!Pathfinder,!ModularFuelTanks,!RealFuels]
	{
		name = ModuleB9PartSwitch
		moduleID = OPTwing
		switcherDescription = OPT Tank
		switcherDescriptionPlural = Tank Selections
		switchInFlight = True
		baseVolume = 1080
	}
}
// Legacy main wing
@PART[wing_1a]
{
	MODULE:NEEDS[B9PartSwitch,!Pathfinder,!ModularFuelTanks,!RealFuels]
	{
		name = ModuleB9PartSwitch
		moduleID = OPTwing
		switcherDescription = OPT Tank
		switcherDescriptionPlural = Tank Selections
		switchInFlight = True
		baseVolume = 300
	}
}

// =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  
// Srf RCS
@PART[opt_retro_rcs|opt_rcs_black|opt_oms_black]
{
	MODULE:NEEDS[B9PartSwitch,!ModularFuelTanks,!RealFuels]
	{
		name = ModuleB9PartSwitch
		moduleID = OPTRCS
		switcherDescription = RCS Mode
		switcherDescriptionPlural = RCS Modes
		switchInFlight = True
	}
}

@PART[opt_rcs_grey|opt_oms_grey|opt_oms_black_2|opt_oms_grey_2]
{
	MODULE:NEEDS[B9PartSwitch,!ModularFuelTanks,!RealFuels]
	{
		name = ModuleB9PartSwitch
		moduleID = OPTRCS
		switcherDescription = RCS Mode
		switcherDescriptionPlural = RCS Modes
		switchInFlight = True
	}
}

// =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  
// Inline SAS/RCS
@PART[j_oms|j_sas|j_4m_droneRCS|j_4m_droneOMS]
{
	// capacityFactor = 0.0222
	MODULE:NEEDS[B9PartSwitch,!ModularFuelTanks,!RealFuels]
	{
		name = ModuleB9PartSwitch
		moduleID = OPTRCS
		switcherDescription = RCS Mode
		switcherDescriptionPlural = RCS Modes
		switchInFlight = True
	}
	MODULE:NEEDS[B9PartSwitch,!ModularFuelTanks,!RealFuels]
	{
		name = ModuleB9PartSwitch
		moduleID = OPTSAS
		switcherDescription = OPT Tank
		switcherDescriptionPlural = Tank Selections
		switchInFlight = True
		baseVolume = 72
	}
}
@PART[j_4m_drone]
{
	// capacityFactor = 0.0222
	MODULE:NEEDS[B9PartSwitch,!ModularFuelTanks,!RealFuels]
	{
		name = ModuleB9PartSwitch
		moduleID = OPTcmd
		switcherDescription = OPT Tank
		switcherDescriptionPlural = Tank Selections
		switchInFlight = True
		baseVolume = 72
	}
}

@PART[k_oms_hollow|kh_oms_hollow]
{
	// capacityFactor = 0.1
	MODULE:NEEDS[B9PartSwitch,!ModularFuelTanks,!RealFuels]
	{
		name = ModuleB9PartSwitch
		moduleID = OPTSAS
		switcherDescription = OPT Tank
		switcherDescriptionPlural = Tank Selections
		switchInFlight = True
		baseVolume = 180
	}
}
@PART[k_oms|l_oms_hollow]
{
	// capacityFactor = 0.15
	MODULE:NEEDS[B9PartSwitch,!ModularFuelTanks,!RealFuels]
	{
		name = ModuleB9PartSwitch
		moduleID = OPTSAS
		switcherDescription = OPT Tank
		switcherDescriptionPlural = Tank Selections
		switchInFlight = True
		baseVolume = 270
	}
}

// =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  
// Drop Tanks
@PART[OPTdropTank]
{
	// capacityFactor = 0.15
	MODULE:NEEDS[B9PartSwitch,!Pathfinder,!ModularFuelTanks,!RealFuels]
	{
		name = ModuleB9PartSwitch
		moduleID = OPTdrop
		switcherDescription = OPT Tank
		switcherDescriptionPlural = Tank Selections
		baseVolume = 270
	}
}
@PART[OPTdropTank2]
{
	// capacityFactor = 0.3
	MODULE:NEEDS[B9PartSwitch,!Pathfinder,!ModularFuelTanks,!RealFuels]
	{
		name = ModuleB9PartSwitch
		moduleID = OPTdrop
		switcherDescription = OPT Tank
		switcherDescriptionPlural = Tank Selections
		baseVolume = 540
	}
}

// =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  
// Apply subtypes
@PART:HAS[#manufacturer[OPT*Division],@MODULE[ModuleB9PartSwitch]]:NEEDS[B9PartSwitch,!Pathfinder,!ModularFuelTanks,!RealFuels]
{
	// Cockpits, drone cores and docking ports
	@MODULE[ModuleB9PartSwitch]:HAS[#moduleID[OPTcmd]]
	{
		SUBTYPE
		{
			name = MO
			tankType = OPTMONO
			title = MonoPropellant
		}
		SUBTYPE
		{
			name = LF
			tankType = OPTLF
			title = LiquidFuel
		}
		SUBTYPE
		{
			name = LFO
			tankType = OPTLFO
			title = Kerolox
		}
		SUBTYPE
		{
			name = OX
			tankType = OPTOX
			title = Oxidizer
		}
		SUBTYPE
		{
			name = Structural
			title = Structural
			switchInFlight = False
		}
		SUBTYPE:NEEDS[Kerbalism|NearFuturePropulsion]
		{
			name = OPTXE
			tankType = OPTXenon
			title = XenonGas
		}
	}
	
	// Cabins
	@MODULE[ModuleB9PartSwitch]:HAS[#moduleID[OPTcabin]]
	{
		SUBTYPE
		{
			name = LF
			tankType = OPTLF
			title = LiquidFuel
		}
		SUBTYPE
		{
			name = LFO
			tankType = OPTLFO
			title = Kerolox
		}
		SUBTYPE
		{
			name = OX
			tankType = OPTOX
			title = Oxidizer
		}
		SUBTYPE
		{
			name = MO
			tankType = OPTMONO
			title = MonoPropellant
		}
		SUBTYPE
		{
			name = Structural
			title = Structural
			switchInFlight = False
		}
		SUBTYPE
		{
			name = BATT
			tankType = Battery
			title = ElectricCharge
			switchInFlight = False
		}
		SUBTYPE:NEEDS[Kerbalism|NearFuturePropulsion]
		{
			name = OPTXE
			tankType = OPTXenon
			title = XenonGas
		}
	}
	
	// Majority body parts
	@MODULE[ModuleB9PartSwitch]:HAS[#moduleID[OPTbody]]
	{
		SUBTYPE
		{
			name = LF
			tankType = OPTLF
			title = LiquidFuel
		}
		SUBTYPE
		{
			name = LFO
			tankType = OPTLFO
			title = Kerolox
		}
		SUBTYPE
		{
			name = OX
			tankType = OPTOX
			title = Oxidizer
		}
		SUBTYPE
		{
			name = MO
			tankType = OPTMONO
			title = MonoPropellant
		}
		SUBTYPE
		{
			name = Structural
			title = Structural
			switchInFlight = False
		}
		SUBTYPE
		{
			name = BATT
			tankType = Battery
			title = ElectricCharge
			switchInFlight = False
		}
		SUBTYPE:NEEDS[Kerbalism|NearFuturePropulsion]
		{
			name = OPTXE
			tankType = OPTXenon
			title = XenonGas
		}
	}
	// Cargo ramps and aero tails
	@MODULE[ModuleB9PartSwitch]:HAS[#moduleID[OPTtail]]
	{
		SUBTYPE
		{
			name = LF
			tankType = OPTLF
			title = LiquidFuel
		}
		SUBTYPE
		{
			name = LFO
			tankType = OPTLFO
			title = Kerolox
		}
		SUBTYPE
		{
			name = OX
			tankType = OPTOX
			title = Oxidizer
		}
		SUBTYPE
		{
			name = MO
			tankType = OPTMONO
			title = MonoPropellant
		}
		SUBTYPE
		{
			name = Structural
			title = Structural
			switchInFlight = False
		}
		SUBTYPE
		{
			name = BATT
			tankType = Battery
			title = ElectricCharge
			switchInFlight = False
		}
		SUBTYPE:NEEDS[Kerbalism|NearFuturePropulsion]
		{
			name = OPTXE
			tankType = OPTXenon
			title = XenonGas
		}
	}
	// Wings
	@MODULE[ModuleB9PartSwitch]:HAS[#moduleID[OPTwing]]
	{
		SUBTYPE
		{
			name = LF
			tankType = OPTLF
			title = LiquidFuel
		}
		SUBTYPE
		{
			name = LFO
			tankType = OPTLFO
			title = Kerolox
		}
		SUBTYPE
		{
			name = OX
			tankType = OPTOX
			title = Oxidizer
		}
		SUBTYPE
		{
			name = MO
			tankType = OPTMONO
			title = MonoPropellant
		}
		SUBTYPE
		{
			name = Structural
			title = Structural
			switchInFlight = False
		}
		SUBTYPE
		{
			name = BATT
			tankType = Battery
			title = ElectricCharge
			switchInFlight = False
		}
		SUBTYPE:NEEDS[Kerbalism|NearFuturePropulsion]
		{
			name = OPTXE
			tankType = OPTXenon
			title = XenonGas
		}
	}
	
	// Cargo bays, hollow parts not including ramps and aero tails
	@MODULE[ModuleB9PartSwitch]:HAS[#moduleID[OPTcargo]]
	{
		SUBTYPE
		{
			name = LF
			tankType = OPTLF
			title = LiquidFuel
		}
		SUBTYPE
		{
			name = LFO
			tankType = OPTLFO
			title = Kerolox
		}
		SUBTYPE
		{
			name = OX
			tankType = OPTOX
			title = Oxidizer
		}
		SUBTYPE
		{
			name = MO
			tankType = OPTMONO
			title = MonoPropellant
		}
		SUBTYPE
		{
			name = Structural
			title = Structural
			switchInFlight = False
		}
		SUBTYPE
		{
			name = BATT
			tankType = Battery
			title = ElectricCharge
			switchInFlight = False
		}
		SUBTYPE:NEEDS[Kerbalism|NearFuturePropulsion]
		{
			name = OPTXE
			tankType = OPTXenon
			title = XenonGas
		}
	}
	
	// see OPT_Reconfig/CRP/OPT_RCS_toggles.cfg for SAS tank config
	
	// Drop tanks
	@MODULE[ModuleB9PartSwitch]:HAS[#moduleID[OPTdrop]]
	{
		SUBTYPE
		{
			name = LF
			tankType = OPTLF
			title = LiquidFuel
			transform = LiquidFuel
		}
		SUBTYPE
		{
			name = OX
			tankType = OPTOX
			title = Oxidizer
			transform = Oxidizer
		}
	}
}

@PART[OPTdropTank]:NEEDS[B9PartSwitch]
{
	@MODULE[ModuleB9PartSwitch]:HAS[#moduleID[OPTdrop]]
	{
		// baseVolume = 270
		@SUBTYPE[LF]
		{
			volumeAdded = -27
		}
		@SUBTYPE[OX]
		{
			volumeAdded = 27
		}
	}
}

@PART[OPTdropTank2]:NEEDS[B9PartSwitch]
{
	@MODULE[ModuleB9PartSwitch]:HAS[#moduleID[OPTdrop]]
	{
		// baseVolume = 540
		@SUBTYPE[LF]
		{
			volumeAdded = -54
		}
		@SUBTYPE[OX]
		{
			volumeAdded = 54
		}
	}
}
// =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  
// Apply mesh transforms
@PART[b_4m_tanks]:AFTER[OPT_Reconfig]
{
	@MODULE[ModuleB9PartSwitch]
	{
		@SUBTYPE,0
		{
			transform = LiquidFuelTank
		}
		@SUBTYPE,1
		{
			transform = LFOTank
		}
		@SUBTYPE,2
		{
			transform = LiquidFuelTank
		}
		@SUBTYPE,3
		{
			transform = LiquidFuelTank
		}
		@SUBTYPE,*:HAS[~transform[*]]
		{
			transform = Structure
		}
	}
}
@PART[b2_4m_adaptor_variant]:AFTER[OPT_Reconfig]
{
	@MODULE[ModuleB9PartSwitch]
	{
		@SUBTYPE,0
		{
			transform = LF
		}
		@SUBTYPE,1
		{
			transform = LFO
		}
		@SUBTYPE,2
		{
			transform = LF
		}
		@SUBTYPE,3
		{
			transform = LF
		}
		@SUBTYPE,*:HAS[~transform[*]]
		{
			transform = Structure
		}
	}
}

// Disable extra meshes when fuel switchers other than B9PS present
@PART[b_4m_tanks]:NEEDS[Pathfinder|ModularFuelTanks|RealFuels]
{
	MODULE
	{
		name = ModuleB9DisableTransform
		transform = LiquidFuelTank
		transform = Structure
	}
}
@PART[OPTdropTank*]:NEEDS[Pathfinder|ModularFuelTanks|RealFuels]
{
	MODULE
	{
		name = ModuleB9DisableTransform
		transform = Oxidizer
	}
}
@PART[b2_4m_adaptor_variant]:NEEDS[Pathfinder|ModularFuelTanks|RealFuels]
{
	MODULE
	{
		name = ModuleB9DisableTransform
		transform = LF
		transform = Structure
	}
}
